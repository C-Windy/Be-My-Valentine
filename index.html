<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>ðŸ’– Puzzle For You ðŸ’–</title>

<style>
body {
  margin:0;
  background: linear-gradient(135deg, #ff4d6d, #ff8fab);
  font-family: Arial, sans-serif;
  text-align:center;
  color:white;
}

h1 {
  margin-top:20px;
}

#puzzle {
  width:300px;
  height:300px;
  margin:30px auto;
  display:grid;
  grid-template-columns: repeat(3, 1fr);
  grid-template-rows: repeat(3, 1fr);
  gap:2px;
}

.tile {
  width:100px;
  height:100px;
  background-image:url('us.JPG');
  background-size:300px 300px;
  cursor:pointer;
}

.hidden {
  background:none;
  cursor:default;
}

#valentine {
  display:none;
  margin-top:30px;
}

button {
  background:white;
  color:#ff4d6d;
  border:none;
  padding:12px 20px;
  font-size:18px;
  border-radius:20px;
  cursor:pointer;
  margin:10px;
}

button:hover {
  background:#ffe5ec;
}
</style>
</head>

<body>

<h1>ðŸ’˜ Put Us Back Together ðŸ’˜</h1>
<p>Solve the puzzle to unlock something special...</p>

<div id="puzzle"></div>

<div id="valentine">
  <h2>ðŸ’– You solved it ðŸ’–</h2>
  <h1>Will you be my Valentine?</h1>
  <button onclick="celebrate()">YES ðŸ’•</button>
</div>

<script>
const puzzle = document.getElementById("puzzle");
const size = 3;
let tiles = [];
let emptyIndex = 8;

// Create tiles
for (let i = 0; i < 9; i++) {
  const tile = document.createElement("div");
  tile.classList.add("tile");
  if (i === 8) {
    tile.classList.add("hidden");
  } else {
    tile.style.backgroundPosition =
      -(i % size) * 100 + "px " +
      -Math.floor(i / size) * 100 + "px";
  }
  tile.dataset.index = i;
  puzzle.appendChild(tile);
  tiles.push(tile);
}

// Shuffle
function shuffle() {
  for (let i = 0; i < 100; i++) {
    let rand = Math.floor(Math.random() * 8);
    swap(rand, emptyIndex);
  }
}

function swap(i1, i2) {
  const temp = tiles[i1].style.backgroundPosition;
  tiles[i1].style.backgroundPosition = tiles[i2].style.backgroundPosition;
  tiles[i2].style.backgroundPosition = temp;

  tiles[i1].classList.toggle("hidden");
  tiles[i2].classList.toggle("hidden");

  emptyIndex = i1;
}

puzzle.addEventListener("click", (e) => {
  const index = tiles.indexOf(e.target);
  if (index < 0) return;

  const row = Math.floor(index / size);
  const col = index % size;
  const emptyRow = Math.floor(emptyIndex / size);
  const emptyCol = emptyIndex % size;

  if (
    (Math.abs(row - emptyRow) === 1 && col === emptyCol) ||
    (Math.abs(col - emptyCol) === 1 && row === emptyRow)
  ) {
    swap(index, emptyIndex);
    checkWin();
  }
});

function checkWin() {
  for (let i = 0; i < 8; i++) {
    const correct =
      -(i % size) * 100 + "px " +
      -Math.floor(i / size) * 100 + "px";
    if (tiles[i].style.backgroundPosition !== correct) {
      return;
    }
  }
  document.getElementById("valentine").style.display = "block";
}

function celebrate() {
  alert("ðŸ’– Best decision ever ðŸ’–");
}

shuffle();
</script>

</body>
</html>
